---
output: github_document
---


# mlr-org Website <img src="man/figures/logo.png" align="right" width = "120" />

[![build-website](https://github.com/mlr-org/mlr3website/actions/workflows/build-website.yml/badge.svg)](https://github.com/mlr-org/mlr3website/actions/workflows/build-website.yml)

# Project Structure

* `mlr3website` - The root directory contains the `mlr3website` R package.
* `mlr-org/` - Quarto project.
* `mlr-org/posts/` - Blog posts.
* `mlr-org/gallery` - Gallery posts.
* `.github/workflows` Contains workflows to build website and render gallery posts

## Setup

Before you can edit the website, you need to install a virtual environment with renv.
This ensures that we all edit the website with the same package versions.
The website is rendered in the CI in the same virtual environment.

1. Clone the `mlr-org/mlr3website` repository.
1. Start a new R session in the `mlr-org/` directory.
1. Call `renv::activate()` and then `renv::restore()` to download and install all required packages.
1. Run the following command from your terminal to preview the website:

    ```bash
    quarto preview mlr-org/
    ```

## Notes

**Freeze**

The blog and gallery posts are freezed i.e. the documents are not re-rendered during a global project render.
Calling `quarto preview mlr-org/` or `quarto render mlr-org/` will not render the blog and gallery posts again.
Calling `quarto render` on a single file or subdirectory will re-render the single file or all files in the subdirectory.

**RSS**

The rss feed of the gallery is published on [R-bloggers](https://www.r-bloggers.com/).

**CSS**

The global css rules are stored in `mlr-og/custom.scss`.
When editing the file, try to stick to the BEM naming pattern and use SASS.
We use the Bootswatch [Yeti](https://bootswatch.com/yeti/) theme.
A few style options are specified in `mlr-org/_quarto.yml` the the `Theme` section.

## How to Add a Blog Post

Blog posts are stored in `mlr-org/posts`.

1. Create a subdirectory in `mlr-org/posts`.
1. Start with a new `index.qmd` file and write your post.
1. Download a suitable cover photo on [Unsplash](https://unsplash.com) in medium resolution.
   Square or landscape format photos look best in the overview.
1. Open a pull request on github.
1. Commit your post once with the option `freeze: false` in YAML header.
   This will render the post on the CI once.
1. Remove the freeze option and ask for a review.

If your post needs a new package or package version:

1. Install the package with `renv::install()` in the virtual environment.
1. Call `renv::snapshot()` to record the package in `renv.lock`.
1. Commit `renv.lock` with the new post.


## How to change the website

* The website consists of pages, blog and gallery posts.
* Pages are `.Qmd` files located in the `mlr-org/` directory (e.g. `packages.Rmd`).
* Blog posts are stored in `mlr-org/posts` and `blog.Rmd` automatically list them.
* Gallery posts are stored in `mlr-org/gallery` and `gallery.Rmd` automatically list them.
* Change the style only in `mlr-org/custom.scss` and add comments to all changes.
* See [quarto.org](https://quarto.org) to learn more about Quarto.

## Workflows

**build-website.yml**

Builds website.
Website is pushed to `gh-pages` branch.
Blog and gallery posts are freezed.
New posts are rendered.
