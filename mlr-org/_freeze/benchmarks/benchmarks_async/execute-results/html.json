{
  "hash": "e7ec3443e1167d5354e3ef3705a61687",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Asynchronous Optimization Runtime Benchmarks\"\nsidebar: false\ntoc: true\ncache: false\nlazy-cache: false\nfreeze: true\nformat:\n  html:\n    fig-width: 12\n    fig-height: 9\nbibliography: ../bibliography.bib\n---\n\n\n\n\n\n\n\n\n\n# Scope\n\nThis report examines the runtime performance of asynchronous optimization algorithms implemented in the mlr3tuning.\n\nThe algorithms optimize 8 hyperparameters of the XGBoost learner on the Bank Marketing dataset.\nThis dataset contains client data from a Portuguese bank's marketing campaign, including demographics, financial information, and previous campaign interactions, used to predict term deposit subscriptions.\nTo ensure an unbiased evaluation of the configurations, a separate validation set was reserved.\nThe remaining data was subjected to 3-fold cross-validation during the optimization process.\nThe performance of each configuration was evaluated using the area under the receiver operating characteristic curve (AUC).\n\nThe experiments were conducted on 10 nodes, each equipped with 128 cores, totaling 1,280 workers.\nThe optimization process ran for 30 minutes, amounting to 640 CPU hours.\n\n# Optimization Algorithms\n\nWe compare four asynchronous optimization algorithms.\nAsynchronous Distributed Bayesian Optimization (ADBO) [@egele_2023] runs sequential [Bayesian optimization](https://mlr3book.mlr-org.com/chapters/chapter5/advanced_tuning_methods_and_black_box_optimization.html#sec-bayesian-optimization) on multiple workers in parallel.\nEach worker maintains its own surrogate model (a random forest) and selects the next hyperparameter configuration by maximizing an upper confidence bounds acquisition function.\nTo promote a varying exploration-exploitation tradeoff on the workers, the acquisition functions are initialized with different lambda values ranging from 0.1 to 10.\nWhen a worker completes an evaluation, it asynchronously sends the result to its peers via a Redis data base; each worker then updates its local model with this shared information.\nThis decentralized design enables workers to proceed independently — eliminating the need for a central coordinator that could become a bottleneck in large-scale optimization scenarios.\nThe number of boosting rounds is separately optimized using [early stopping](https://mlr3book.mlr-org.com/chapters/chapter15/predsets_valid_inttune.html#sec-internal-tuning) on the test set.\nTo start the optimization process with a diverse set of configurations, a Sobol sample with 2,000 configurations is generated.\n\nAsynchronous Successive Halving Algorithm (ASHA) [@li_2020] belongs to the family of [hyperband](https://mlr3book.mlr-org.com/chapters/chapter5/advanced_tuning_methods_and_black_box_optimization.html#sec-hyperband) algorithms.\nThe algorithm is an extension Successive Halving Algorithm, which initially allocates minimal resources to many configurations and then progressively increases resource allocation only for those configurations that perform well.\nOne of the key innovations of ASHA is its asynchronous approach to promotions.\nUnlike traditional methods that require all configurations in a given stage to complete before moving on, ASHA promotes promising configurations as soon as they meet the performance criteria.\nThis strategy eliminates the bottleneck caused by slower or underperforming models, ensuring that the overall process remains efficient and that computing resources are used effectively.\nWe setup the algorithm to allocate 9 boosting rounds in the first stages and increases the number of boosting rounds by a factor of 3 in each subsequent stage until the maximum number of boosting rounds of 2187 is reached.\nThe hotstart variant of ASHA continues training from the previous stage rather than retraining from scratch.\n\nAs a baseline, we implement parallel random search [@bergstra_2012] across all workers.\nThis method samples hyperparameter configurations uniformly at random from the search space, and the optimal number of boosting rounds is determined using early stopping on the test set.\n\nThe code shows a simplified version of the benchmark experiment.\nWe removed parts that are specific to the high performance cluster.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rush)\nlibrary(mlr3tuning)\nlibrary(mlr3learners)\nlibrary(mlr3oml)\nlibrary(mlr3pipelines)\nlibrary(mlr3hyperband)\n\nset.seed(4356)\n\nconfig = redux::redis_config(\n  host = \"10.14.20.237\",\n  port = \"6362\"\n)\n\nrush_plan(n_workers = 1280, config = config, worker_type = \"script\")\n\nlearner = as_learner(po(\"encodeimpact\") %>>% lrn(\"classif.xgboost\",\n  eta               = to_tune(1e-4, 1, logscale = TRUE),\n  max_depth         = to_tune(1, 20),\n  colsample_bytree  = to_tune(1e-1, 1),\n  colsample_bylevel = to_tune(1e-1, 1),\n  lambda            = to_tune(1e-3, 1e3, logscale = TRUE),\n  alpha             = to_tune(1e-3, 1e3, logscale = TRUE),\n  subsample         = to_tune(1e-1, 1),\n  nrounds           = to_tune(p_int(9, 2187, tags = \"budget\")),\n  predict_type = \"prob\",\n  id = \"xgboost\"))\n\n# download task\notask = otsk(359982)\ntask = as_task(otask)\n\n# split task into training-test and validation set\nsplits = partition(task, ratio = 0.8)\ntask_holdout = task$clone()\ntask_holdout$filter(splits$test)\ntask$filter(splits$train)\n\n# create tuning instance\ninstance = ti_async(\n  task = task,\n  learner = learner,\n  resampling = rsmp(\"cv\", folds = 3),\n  measures = msr(\"classif.auc\"),\n  terminator = trm(\"run_time\", secs = 1800L),\n  store_benchmark_result = FALSE,\n  store_models = FALSE,\n  callbacks = clbk(\"mlr3tuning.holdout\", task = task_holdout)\n)\n\n# selected tuner\ntuner = tnr(\"async_successive_halving\", eta = 3)\n\n# optimize\ntuner$optimize(instance)\n```\n:::\n\n\n\n\n\n# Results\n\nThe following plots show the performance of the algorithms over time.\nThe performance differences are small and all algorithms quickly converge to good configurations.\nThe ASHA algorithm with hotstarting outperforms the ADBO and Random Search algorithms in terms of validation AUC.\n\n\n\n\n\n::: {.cell layout-ncol=\"1\"}\n::: {.cell-output-display}\n![Validation AUC Performance](benchmarks_async_files/figure-html/unnamed-chunk-4-1.png){width=1152}\n:::\n\n::: {.cell-output-display}\n![Rank Performance](benchmarks_async_files/figure-html/unnamed-chunk-4-2.png){width=1152}\n:::\n\nPerformance over time for each optimizer.\n:::\n\n\n\n\n\nThe next table shows the final configurations selected by the optimizers and their validation AUC.\nCompared to the other algorithms, random search selected a configuration with a higher number of boosting rounds.\n\n\n\n\n\n::: {.cell .column-page tbl-cap='Final configurations selected by the optimizers.'}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"mrpunlmgia\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#mrpunlmgia table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#mrpunlmgia thead, #mrpunlmgia tbody, #mrpunlmgia tfoot, #mrpunlmgia tr, #mrpunlmgia td, #mrpunlmgia th {\n  border-style: none;\n}\n\n#mrpunlmgia p {\n  margin: 0;\n  padding: 0;\n}\n\n#mrpunlmgia .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#mrpunlmgia .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#mrpunlmgia .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#mrpunlmgia .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#mrpunlmgia .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#mrpunlmgia .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mrpunlmgia .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#mrpunlmgia .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#mrpunlmgia .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#mrpunlmgia .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#mrpunlmgia .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#mrpunlmgia .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#mrpunlmgia .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#mrpunlmgia .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#mrpunlmgia .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#mrpunlmgia .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#mrpunlmgia .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#mrpunlmgia .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#mrpunlmgia .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mrpunlmgia .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#mrpunlmgia .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#mrpunlmgia .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#mrpunlmgia .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mrpunlmgia .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#mrpunlmgia .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#mrpunlmgia .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mrpunlmgia .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mrpunlmgia .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#mrpunlmgia .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mrpunlmgia .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#mrpunlmgia .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mrpunlmgia .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#mrpunlmgia .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mrpunlmgia .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#mrpunlmgia .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mrpunlmgia .gt_left {\n  text-align: left;\n}\n\n#mrpunlmgia .gt_center {\n  text-align: center;\n}\n\n#mrpunlmgia .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#mrpunlmgia .gt_font_normal {\n  font-weight: normal;\n}\n\n#mrpunlmgia .gt_font_bold {\n  font-weight: bold;\n}\n\n#mrpunlmgia .gt_font_italic {\n  font-style: italic;\n}\n\n#mrpunlmgia .gt_super {\n  font-size: 65%;\n}\n\n#mrpunlmgia .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#mrpunlmgia .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#mrpunlmgia .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#mrpunlmgia .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#mrpunlmgia .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#mrpunlmgia .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#mrpunlmgia .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#mrpunlmgia .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#mrpunlmgia div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"tuner\">Tuner</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"holdout_auc\">Validation AUC</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"runtime_learners\">runtime_learners</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"alpha\">alpha</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"colsample_bylevel\">colsample_bylevel</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"colsample_bytree\">colsample_bytree</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"eta\">eta</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"lambda\">lambda</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"max_depth\">max_depth</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"subsample\">subsample</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"nrounds\">nrounds</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"tuner\" class=\"gt_row gt_left\">asha</td>\n<td headers=\"holdout_auc\" class=\"gt_row gt_right\">0.9372</td>\n<td headers=\"runtime_learners\" class=\"gt_row gt_right\">37.64</td>\n<td headers=\"alpha\" class=\"gt_row gt_right\">0.85</td>\n<td headers=\"colsample_bylevel\" class=\"gt_row gt_right\">0.64</td>\n<td headers=\"colsample_bytree\" class=\"gt_row gt_right\">0.55</td>\n<td headers=\"eta\" class=\"gt_row gt_right\">−3.12</td>\n<td headers=\"lambda\" class=\"gt_row gt_right\">−1.23</td>\n<td headers=\"max_depth\" class=\"gt_row gt_right\">16</td>\n<td headers=\"subsample\" class=\"gt_row gt_right\">0.91</td>\n<td headers=\"nrounds\" class=\"gt_row gt_right\">243</td></tr>\n    <tr><td headers=\"tuner\" class=\"gt_row gt_left\">asha_hotstart</td>\n<td headers=\"holdout_auc\" class=\"gt_row gt_right\">0.9392</td>\n<td headers=\"runtime_learners\" class=\"gt_row gt_right\">15.96</td>\n<td headers=\"alpha\" class=\"gt_row gt_right\">1.31</td>\n<td headers=\"colsample_bylevel\" class=\"gt_row gt_right\">0.48</td>\n<td headers=\"colsample_bytree\" class=\"gt_row gt_right\">0.66</td>\n<td headers=\"eta\" class=\"gt_row gt_right\">−3.26</td>\n<td headers=\"lambda\" class=\"gt_row gt_right\">−2.75</td>\n<td headers=\"max_depth\" class=\"gt_row gt_right\">13</td>\n<td headers=\"subsample\" class=\"gt_row gt_right\">0.97</td>\n<td headers=\"nrounds\" class=\"gt_row gt_right\">243</td></tr>\n    <tr><td headers=\"tuner\" class=\"gt_row gt_left\">random_search</td>\n<td headers=\"holdout_auc\" class=\"gt_row gt_right\">0.9375</td>\n<td headers=\"runtime_learners\" class=\"gt_row gt_right\">199.04</td>\n<td headers=\"alpha\" class=\"gt_row gt_right\">0.56</td>\n<td headers=\"colsample_bylevel\" class=\"gt_row gt_right\">0.49</td>\n<td headers=\"colsample_bytree\" class=\"gt_row gt_right\">0.58</td>\n<td headers=\"eta\" class=\"gt_row gt_right\">−5.76</td>\n<td headers=\"lambda\" class=\"gt_row gt_right\">−1.30</td>\n<td headers=\"max_depth\" class=\"gt_row gt_right\">11</td>\n<td headers=\"subsample\" class=\"gt_row gt_right\">1.00</td>\n<td headers=\"nrounds\" class=\"gt_row gt_right\">2533</td></tr>\n    <tr><td headers=\"tuner\" class=\"gt_row gt_left\">adbo</td>\n<td headers=\"holdout_auc\" class=\"gt_row gt_right\">0.9375</td>\n<td headers=\"runtime_learners\" class=\"gt_row gt_right\">21.56</td>\n<td headers=\"alpha\" class=\"gt_row gt_right\">1.16</td>\n<td headers=\"colsample_bylevel\" class=\"gt_row gt_right\">0.81</td>\n<td headers=\"colsample_bytree\" class=\"gt_row gt_right\">0.47</td>\n<td headers=\"eta\" class=\"gt_row gt_right\">−2.94</td>\n<td headers=\"lambda\" class=\"gt_row gt_right\">−2.13</td>\n<td headers=\"max_depth\" class=\"gt_row gt_right\">8</td>\n<td headers=\"subsample\" class=\"gt_row gt_right\">0.99</td>\n<td headers=\"nrounds\" class=\"gt_row gt_right\">216</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\nThe ASHA algorithms evaluated 12 to 22 times more configurations than ADBO and Random Search due to the low fidelity evaluations in the first stages.\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Number of configurations evaluated by each optimizer.](benchmarks_async_files/figure-html/unnamed-chunk-6-1.png){width=1152}\n:::\n:::\n\n\n\n\n\nFigure @fig-hyperband shows the number of evaluated hyperparameter configurations per stage for ASHA and ASHA Hotstart.\nThe number of configurations is reduced in each stage by a factor of 3.\nWith hotstarting more configurations are evaluated in all stages compared to the base ASHA algorithm.\nThe number of evaluated configurations almost doubles due to the reduced training time of the models.\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Number of evaluated hyperparameter configurations per stage for ASHA and ASHA Hotstart.](benchmarks_async_files/figure-html/fig-hyperband-1.png){#fig-hyperband width=1152}\n:::\n:::\n\n\n\n\n\nAs an example, we show the marginal plot of the learning rate `eta` and regularization parameter `alpha` from the ASHA Hotstart run.\nThe plot shows the configurations evaluated by the algorithm in each stage.\nEach point represents a configuration, and the color shows the validation AUC value.\nIn the fist stage many configurations are tried quickly with a small training budget.\nWe can see that large `alpha` values produce lower AUC values and are not promoted to the next stage.\nAs the algorithm progresses, it focuses on more promising regions of the hyperparameter space.\nBy the last stages we have fewer configurations but a large number of boosting rounds.\nThe algorithm favors configurations in the middle range of `eta` values.\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Marginal plot of `eta` and `alpha` for ASHA Hotstart.\nEach point represents a configuration evaluated by ASHA Hotstart.\nThe color shows the validation AUC value.\nThe facets show the number of boosting rounds or stages.](benchmarks_async_files/figure-html/unnamed-chunk-8-1.png){width=1152}\n:::\n:::\n\n\n\n\n\nOne of the main reasons to develop asynchronous algorithms for mlr3tuning was the low cpu utilization of the batch parallelization approach.\nThe following table shows the mean utilization of the workers.\nThe utilization is calculated as the ratio of the runtime of the learners to the runtime of the workers.\nAll algorithms show an overhead around 7% due to the overhead of `resample()` and the communication between the workers.\n\n\n\n\n\n::: {.cell tbl-cap='Mean utilization of the workers for each optimizer.'}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"rydleufdus\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#rydleufdus table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#rydleufdus thead, #rydleufdus tbody, #rydleufdus tfoot, #rydleufdus tr, #rydleufdus td, #rydleufdus th {\n  border-style: none;\n}\n\n#rydleufdus p {\n  margin: 0;\n  padding: 0;\n}\n\n#rydleufdus .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#rydleufdus .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#rydleufdus .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#rydleufdus .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#rydleufdus .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rydleufdus .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rydleufdus .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rydleufdus .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#rydleufdus .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#rydleufdus .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#rydleufdus .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#rydleufdus .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#rydleufdus .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#rydleufdus .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#rydleufdus .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#rydleufdus .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#rydleufdus .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#rydleufdus .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#rydleufdus .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rydleufdus .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#rydleufdus .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#rydleufdus .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#rydleufdus .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rydleufdus .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#rydleufdus .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#rydleufdus .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rydleufdus .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rydleufdus .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#rydleufdus .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rydleufdus .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#rydleufdus .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rydleufdus .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rydleufdus .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rydleufdus .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rydleufdus .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rydleufdus .gt_left {\n  text-align: left;\n}\n\n#rydleufdus .gt_center {\n  text-align: center;\n}\n\n#rydleufdus .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#rydleufdus .gt_font_normal {\n  font-weight: normal;\n}\n\n#rydleufdus .gt_font_bold {\n  font-weight: bold;\n}\n\n#rydleufdus .gt_font_italic {\n  font-style: italic;\n}\n\n#rydleufdus .gt_super {\n  font-size: 65%;\n}\n\n#rydleufdus .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#rydleufdus .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#rydleufdus .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#rydleufdus .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#rydleufdus .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#rydleufdus .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#rydleufdus .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#rydleufdus .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#rydleufdus div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"tuner\">Tuner</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"mean_utilization\">Mean Utilization</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"tuner\" class=\"gt_row gt_left\">asha</td>\n<td headers=\"mean_utilization\" class=\"gt_row gt_right\">94.3%</td></tr>\n    <tr><td headers=\"tuner\" class=\"gt_row gt_left\">asha_hotstart</td>\n<td headers=\"mean_utilization\" class=\"gt_row gt_right\">93.7%</td></tr>\n    <tr><td headers=\"tuner\" class=\"gt_row gt_left\">random_search</td>\n<td headers=\"mean_utilization\" class=\"gt_row gt_right\">92.7%</td></tr>\n    <tr><td headers=\"tuner\" class=\"gt_row gt_left\">adbo</td>\n<td headers=\"mean_utilization\" class=\"gt_row gt_right\">93.5%</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n",
    "supporting": [
      "benchmarks_async_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}