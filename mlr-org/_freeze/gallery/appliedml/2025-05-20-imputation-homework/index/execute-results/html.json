{
  "hash": "5cfbc2d88b7315e3cced2f8c10a548a8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Imputation Homework\ngroup: Imputation\ncategories:\n  - imputation\n  - mlr3benchmarking\nauthor:\n  - name: Fiona Ewald\n  - name: Essential Data Science Training GmbH\n    url: https://www.essentialds.de\ndescription: |\n  Learn the basics of imputation (i.e. filling in missing data) with `mlr3pipelines`.\ndate: \"\"\nparams:\n  showsolution: true\n  base64encode: true\nlisting: false\nsearch: false\nformat:\n  html:\n    filters:\n      - ../../b64_solution.lua\n---\n\n\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\n```{=html}\n<script>\nconst correctHash = \"0dd8fc32ac43f85b9b89c23ff15e959e25332b43e1d9085c0aa02133fa615f33\";   // value injected by knitr\n\n/* ---------- reusable helper ---------- */\nfunction b64DecodeUtf8(b64) {\n  // 1) atob  -> binary-string   (bytes 0…255)\n  // 2) map   -> Uint8Array      (array of bytes)\n  // 3) TextDecoder('utf-8')     -> real JS string\n  const bytes = Uint8Array.from(atob(b64), c => c.charCodeAt(0));\n  return new TextDecoder('utf-8').decode(bytes);\n}\n\nasync function sha256(txt) {\n  const buf = await crypto.subtle.digest('SHA-256',\n                 new TextEncoder().encode(txt));\n  return Array.from(new Uint8Array(buf))\n              .map(b => b.toString(16).padStart(2, '0')).join('');\n}\n\nasync function unlockOne(btn) {\n  const pass = prompt(\"Password:\");\n  if (!pass) return;\n  if (await sha256(pass) !== correctHash) {\n    alert(\"Wrong password\"); return;\n  }\n\n  /* --- decode only the solution that belongs to THIS button --- */\n  const wrapper = btn.parentElement;             // .b64-wrapper\n  wrapper.querySelectorAll('.hidden-solution').forEach(div => {\n    div.innerHTML = b64DecodeUtf8(div.dataset.encoded);\n    div.classList.remove('hidden-solution');\n    div.style.display = 'block';\n  });\n\n  /* Remove the button so the user can’t click it again */\n  btn.remove();\n}\n</script>\n\n<noscript>\n<div style=\"border: 1px solid #ccc; padding: 1em; margin-top: 1em; background: #f9f9f9;\">\n    <strong>JavaScript is required to unlock solutions.</strong><br>\n    Please enable JavaScript and reload the page,<br>\n    or download the source files from\n    <a href=\"https://github.com/mlr-org/mlr3website/\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub</a>\n    and run the code locally.\n  </div>\n</noscript>\n```\n\n\n\n\n\n# Goal\n\nOur goal for this homework is to learn the basics of imputation within the `mlr3` universe, specifically, `mlr3pipelines`.\nImputation is the process of filling in missing data in a data set using statistical methods like mean, median, mode, or predictive models.\n\n# Required packages\n\nWe will use `mlr3` for machine learning and `mlr3oml` for data access from OpenML:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(mlr3verse)\nlibrary(mlr3tuning)\nlibrary(mlr3oml)\nset.seed(12345)\n```\n:::\n\n\n# Data: Washington bike rentals\n\nWe will use bike sharing data for 731 days in Washington, D.C, where the target variable is `\"rentals\"`.\n\nLet's load the data and remove an unwanted column: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nbikes = as.data.frame(odt(id = 45103)$data)[,-c(10)]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nINFO  [19:46:21.713] Retrieving JSON {url: `https://www.openml.org/api/v1/json/data/45103`, authenticated: `FALSE`}\nINFO  [19:46:22.109] Retrieving ARFF {url: `https://api.openml.org/data/v1/download/22112196/dailybike.arff`, authenticated: `FALSE`}\nINFO  [19:46:22.570] Retrieving JSON {url: `https://www.openml.org/api/v1/json/data/features/45103`, authenticated: `FALSE`}\n```\n\n\n:::\n\n```{.r .cell-code}\nbikes$rentals = as.numeric(as.character(bikes$rentals))\n```\n:::\n\n\nFurther, we artificially generate missing data entries for the feature `temp`:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nrows <- sample(nrow(bikes), 300, replace = FALSE)\nbikes[rows, \"temp\"] <- NA\n```\n:::\n\n\n# Compare different learners\n\nIn this exercise, we want to compare the performance of two learners that are used to impute the missing values in `temp`: a linear model (LM) and a k-nearest neighbor (kNN), where we want to tune the hyperparameter `k`. We benchmark the performance of a pipeline that connects the different imputation methods with a random forest learner.\n\n## Construct a pipeline graph\n\nFirst, we need a pipeline that contains both imputation methods as alternatives, effectively treating them as a hyperparameter. This is then connected to the random forest learner. Define and plot the appropriate graph object.\n\n<details>\n<summary>**Hint 1:**</summary>\n\nExpressing two competing imputation methods in a graph can be done with branching, see more in `??mlr_pipeops_branch`.\n\n</details>\n\n:::{.callout-note collapse=\"true\"}\n\n### Solution\n\n:::{.b64-solution}\n\n\n\n::: {.cell layout-align=\"center\" messages='false'}\n\n```{.r .cell-code}\nimpute = list(\n  \"impute_lm\" = po(\"imputelearner\", id = \"impute_lm\", learner = po(\"imputehist\") %>>% lrn(\"regr.lm\")),\n  \"impute_knn\" = po(\"imputelearner\", id = \"impute_knn\", learner = po(\"imputehist\") %>>% lrn(\"regr.kknn\"))\n)\nforest = lrn(\"regr.ranger\")\ngraph = ppl(\"branch\", impute) %>>% forest\nplot(graph)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){fig-align='center' width=672}\n:::\n:::\n\n\n:::\n\n:::\n\n## Tunable HPs\n\nWe want to tune a number of hyperparameters in the pipeline:\n1) The imputation method, as represented in the graph, and\n2) the `k` parameter of the kNN-based imputation method for values from 1 to 8.\nFor the latter, we have to define a dependency to only vary `k` if kNN is chosen as imputation learner.\n\n<details>\n<summary>**Hint 1:**</summary>\n\nRemember that a graph can be treated as any other learner, and therefore, its parameter set can be accessed correspondingly. This means you can find the relevant parameter names in the correct field of the graph object.\nYou can use the following code snippet to define dependencies:\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntune_ps$add_dep(\"...\", \"...\", CondEqual$new(\"...\"))\n```\n:::\n\nTake a look at `??ParamSet` for further information.\n\n</details>\n\n<details>\n<summary>**Hint 2:**</summary>\n\nA parameter space can be defined using the `ps()` sugar function.\n\n</details>\n\n:::{.callout-note collapse=\"true\"}\n\n### Solution\n\n:::{.b64-solution}\n\n\n\n::: {.cell layout-align=\"center\" messages='false'}\n\n```{.r .cell-code}\ntune_ps = ps(\n  branch.selection = p_fct(c(\"impute_lm\", \"impute_knn\")),\n  impute_knn.regr.kknn.k = p_int(1L, 8L)\n)\n# Tune k only when kNN is selected\ntune_ps$add_dep(\"impute_knn.regr.kknn.k\", \"branch.selection\", CondEqual$new(\"impute_knn\"))\n```\n:::\n\n\n:::\n\n:::\n\n## Tune the pipeline and visualize results\n\nCreate a task for the bike rental data and tune a graph learner with grid search over the defined search space, using 4-fold CV repeated 3 times, MSE as performance measure and no terminator. Visualize and interpret the results.\n\n<details>\n<summary>**Hint 1:**</summary>\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntask = ...\n\ninstance = tune(...)\n\nautoplot(...)\n```\n:::\n\n\n</details>\n\n:::{.callout-note collapse=\"true\"}\n\n### Solution\n\n:::{.b64-solution}\n\n\n\n::: {.cell layout-align=\"center\" messages='false'}\n\n```{.r .cell-code}\ntask = TaskRegr$new(id = \"bikes\", backend = bikes, target = \"rentals\")\n\ninstance = tune(\n  tuner = tnr(\"grid_search\"),\n  task = task,\n  learner = graph,\n  search_space = tune_ps,\n  resampling = rsmp(\"repeated_cv\", folds = 4, repeats = 3),\n  measure = msr(\"regr.mse\"),\n  terminator = trm(\"none\")\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nINFO  [19:46:24.040] [bbotk] Starting to optimize 2 parameter(s) with '<OptimizerBatchGridSearch>' and '<TerminatorNone>'\nINFO  [19:46:24.061] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:46:24.078] [mlr3] Running benchmark with 12 resampling iterations\nINFO  [19:46:25.184] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 1/12)\nINFO  [19:46:25.388] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 2/12)\nINFO  [19:46:26.002] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 3/12)\nINFO  [19:46:26.608] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 4/12)\nINFO  [19:46:27.618] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 5/12)\nINFO  [19:46:28.400] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 6/12)\nINFO  [19:46:29.186] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 7/12)\nINFO  [19:46:30.014] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 8/12)\nINFO  [19:46:30.400] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 9/12)\nINFO  [19:46:30.747] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 10/12)\nINFO  [19:46:31.051] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 11/12)\nINFO  [19:46:33.010] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 12/12)\nINFO  [19:46:34.773] [mlr3] Finished benchmark\nINFO  [19:46:34.839] [bbotk] Result of batch 1:\nINFO  [19:46:34.843] [bbotk]  branch.selection impute_knn.regr.kknn.k regr.mse warnings errors runtime_learners                                uhash\nINFO  [19:46:34.843] [bbotk]        impute_knn                      7   105226        0      0            35.31 65dcfbac-b5cc-40e0-9070-16c3d7ad51c9\nINFO  [19:46:34.847] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:46:34.861] [mlr3] Running benchmark with 12 resampling iterations\nINFO  [19:46:35.039] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 1/12)\nINFO  [19:46:35.194] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 2/12)\nINFO  [19:46:35.410] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 3/12)\nINFO  [19:46:35.639] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 4/12)\nINFO  [19:46:36.235] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 5/12)\nINFO  [19:46:36.490] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 6/12)\nINFO  [19:46:37.068] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 7/12)\nINFO  [19:46:37.343] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 8/12)\nINFO  [19:46:37.587] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 9/12)\nINFO  [19:46:37.901] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 10/12)\nINFO  [19:46:38.210] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 11/12)\nINFO  [19:46:38.532] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 12/12)\nINFO  [19:46:40.619] [mlr3] Finished benchmark\nINFO  [19:46:40.682] [bbotk] Result of batch 2:\nINFO  [19:46:40.684] [bbotk]  branch.selection impute_knn.regr.kknn.k regr.mse warnings errors runtime_learners                                uhash\nINFO  [19:46:40.684] [bbotk]        impute_knn                      6   105428        0      0            28.91 c2ec5cb4-9edd-4d3c-9d1a-00fce5bd37ba\nINFO  [19:46:40.688] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:46:40.702] [mlr3] Running benchmark with 12 resampling iterations\nINFO  [19:46:40.884] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 1/12)\nINFO  [19:46:41.090] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 2/12)\nINFO  [19:46:41.292] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 3/12)\nINFO  [19:46:41.812] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 4/12)\nINFO  [19:46:42.057] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 5/12)\nINFO  [19:46:42.317] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 6/12)\nINFO  [19:46:42.577] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 7/12)\nINFO  [19:46:42.853] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 8/12)\nINFO  [19:46:43.546] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 9/12)\nINFO  [19:46:44.146] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 10/12)\nINFO  [19:46:44.448] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 11/12)\nINFO  [19:46:45.022] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 12/12)\nINFO  [19:46:46.901] [mlr3] Finished benchmark\nINFO  [19:46:46.965] [bbotk] Result of batch 3:\nINFO  [19:46:46.968] [bbotk]  branch.selection impute_knn.regr.kknn.k regr.mse warnings errors runtime_learners                                uhash\nINFO  [19:46:46.968] [bbotk]        impute_knn                      8 105032.7        0      0            27.77 81a06c20-c9d2-4a01-92a8-69d79ae79a73\nINFO  [19:46:46.972] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:46:46.985] [mlr3] Running benchmark with 12 resampling iterations\nINFO  [19:46:47.175] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 1/12)\nINFO  [19:46:47.382] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 2/12)\nINFO  [19:46:47.595] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 3/12)\nINFO  [19:46:48.169] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 4/12)\nINFO  [19:46:48.451] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 5/12)\nINFO  [19:46:48.764] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 6/12)\nINFO  [19:46:49.424] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 7/12)\nINFO  [19:46:49.494] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 8/12)\nINFO  [19:46:50.038] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 9/12)\nINFO  [19:46:50.437] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 10/12)\nINFO  [19:46:50.847] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 11/12)\nINFO  [19:46:53.072] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 12/12)\nINFO  [19:46:55.671] [mlr3] Finished benchmark\nINFO  [19:46:55.731] [bbotk] Result of batch 4:\nINFO  [19:46:55.733] [bbotk]  branch.selection impute_knn.regr.kknn.k regr.mse warnings errors runtime_learners                                uhash\nINFO  [19:46:55.733] [bbotk]        impute_knn                      3 107739.5        0      0            45.67 528e7b94-509c-4d6f-9fa4-53290f1a12a7\nINFO  [19:46:55.737] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:46:55.750] [mlr3] Running benchmark with 12 resampling iterations\nINFO  [19:46:55.927] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 1/12)\nINFO  [19:46:56.134] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 2/12)\nINFO  [19:46:56.339] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 3/12)\nINFO  [19:46:56.563] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 4/12)\nINFO  [19:46:56.829] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 5/12)\nINFO  [19:46:57.131] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 6/12)\nINFO  [19:46:57.499] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 7/12)\nINFO  [19:46:57.881] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 8/12)\nINFO  [19:46:59.921] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 9/12)\nINFO  [19:47:00.489] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 10/12)\nINFO  [19:47:00.942] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 11/12)\nINFO  [19:47:01.424] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 12/12)\nINFO  [19:47:04.686] [mlr3] Finished benchmark\nINFO  [19:47:04.756] [bbotk] Result of batch 5:\nINFO  [19:47:04.758] [bbotk]  branch.selection impute_knn.regr.kknn.k regr.mse warnings errors runtime_learners                                uhash\nINFO  [19:47:04.758] [bbotk]         impute_lm                     NA 102952.2        0      0            48.46 3a625c96-80a3-4d0b-9cb4-ffc02e6bc6b1\nINFO  [19:47:04.762] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:47:04.782] [mlr3] Running benchmark with 12 resampling iterations\nINFO  [19:47:04.967] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 1/12)\nINFO  [19:47:05.159] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 2/12)\nINFO  [19:47:05.377] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 3/12)\nINFO  [19:47:05.646] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 4/12)\nINFO  [19:47:05.951] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 5/12)\nINFO  [19:47:06.682] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 6/12)\nINFO  [19:47:07.088] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 7/12)\nINFO  [19:47:07.491] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 8/12)\nINFO  [19:47:09.923] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 9/12)\nINFO  [19:47:10.325] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 10/12)\nINFO  [19:47:10.771] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 11/12)\nINFO  [19:47:11.268] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 12/12)\nINFO  [19:47:13.755] [mlr3] Finished benchmark\nINFO  [19:47:13.824] [bbotk] Result of batch 6:\nINFO  [19:47:13.826] [bbotk]  branch.selection impute_knn.regr.kknn.k regr.mse warnings errors runtime_learners                                uhash\nINFO  [19:47:13.826] [bbotk]        impute_knn                      1 108618.7        0      0            41.13 990675cd-55bd-45b7-887d-f613224b2a97\nINFO  [19:47:13.830] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:47:13.844] [mlr3] Running benchmark with 12 resampling iterations\nINFO  [19:47:14.054] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 1/12)\nINFO  [19:47:14.261] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 2/12)\nINFO  [19:47:14.480] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 3/12)\nINFO  [19:47:14.718] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 4/12)\nINFO  [19:47:15.050] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 5/12)\nINFO  [19:47:15.385] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 6/12)\nINFO  [19:47:15.734] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 7/12)\nINFO  [19:47:16.527] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 8/12)\nINFO  [19:47:18.698] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 9/12)\nINFO  [19:47:19.133] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 10/12)\nINFO  [19:47:19.688] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 11/12)\nINFO  [19:47:20.095] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 12/12)\nINFO  [19:47:23.604] [mlr3] Finished benchmark\nINFO  [19:47:23.665] [bbotk] Result of batch 7:\nINFO  [19:47:23.669] [bbotk]  branch.selection impute_knn.regr.kknn.k regr.mse warnings errors runtime_learners                                uhash\nINFO  [19:47:23.669] [bbotk]        impute_knn                      5 105796.8        0      0            45.75 b760b791-e176-4e0b-9ca4-4421f41bdf3b\nINFO  [19:47:23.673] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:47:23.686] [mlr3] Running benchmark with 12 resampling iterations\nINFO  [19:47:23.867] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 1/12)\nINFO  [19:47:24.058] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 2/12)\nINFO  [19:47:24.271] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 3/12)\nINFO  [19:47:24.559] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 4/12)\nINFO  [19:47:24.837] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 5/12)\nINFO  [19:47:25.169] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 6/12)\nINFO  [19:47:25.526] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 7/12)\nINFO  [19:47:25.957] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 8/12)\nINFO  [19:47:28.161] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 9/12)\nINFO  [19:47:28.781] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 10/12)\nINFO  [19:47:29.599] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 11/12)\nINFO  [19:47:30.409] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 12/12)\nINFO  [19:47:33.829] [mlr3] Finished benchmark\nINFO  [19:47:33.897] [bbotk] Result of batch 8:\nINFO  [19:47:33.899] [bbotk]  branch.selection impute_knn.regr.kknn.k regr.mse warnings errors runtime_learners                                uhash\nINFO  [19:47:33.899] [bbotk]        impute_knn                      4   107003        0      0            53.14 ae8243db-e047-4ed0-a8bc-9c00b108a82f\nINFO  [19:47:33.903] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:47:33.920] [mlr3] Running benchmark with 12 resampling iterations\nINFO  [19:47:34.105] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 1/12)\nINFO  [19:47:34.298] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 2/12)\nINFO  [19:47:34.542] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 3/12)\nINFO  [19:47:34.771] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 4/12)\nINFO  [19:47:35.328] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 5/12)\nINFO  [19:47:35.964] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 6/12)\nINFO  [19:47:36.101] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 7/12)\nINFO  [19:47:36.662] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 8/12)\nINFO  [19:47:38.843] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 9/12)\nINFO  [19:47:39.278] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 10/12)\nINFO  [19:47:39.809] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 11/12)\nINFO  [19:47:40.541] [mlr3] Applying learner 'branch.impute_lm.impute_knn.unbranch.regr.ranger' on task 'bikes' (iter 12/12)\nINFO  [19:47:44.137] [mlr3] Finished benchmark\nINFO  [19:47:44.199] [bbotk] Result of batch 9:\nINFO  [19:47:44.201] [bbotk]  branch.selection impute_knn.regr.kknn.k regr.mse warnings errors runtime_learners                                uhash\nINFO  [19:47:44.201] [bbotk]        impute_knn                      2 108528.6        0      0            50.09 fed2204b-982d-4d37-975d-ad058f45868d\nINFO  [19:47:44.230] [bbotk] Finished optimizing after 9 evaluation(s)\nINFO  [19:47:44.230] [bbotk] Result:\nINFO  [19:47:44.233] [bbotk]  branch.selection impute_knn.regr.kknn.k learner_param_vals  x_domain regr.mse\nINFO  [19:47:44.233] [bbotk]            <char>                  <int>             <list>    <list>    <num>\nINFO  [19:47:44.233] [bbotk]         impute_lm                     NA          <list[4]> <list[1]> 102952.2\n```\n\n\n:::\n\n```{.r .cell-code}\nautoplot(instance)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){fig-align='center' width=672}\n:::\n:::\n\n\nAs can be seen, LM-based imputation performs much better than kNN imputation. Note, that the right plot might be misleading since the lower values, where LM was used for imputation, does not depend on the choice of `k`.\n\n:::\n\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}