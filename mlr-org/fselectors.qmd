---
sidebar: false
toc: false
---

# Feature Selection Wrapper

{{< include _setup.qmd >}}

```{r}
#| include: false

library(mlr3fselect)

lgr::get_logger("mlr3")$set_threshold("warn")
lgr::get_logger("bbotk")$set_threshold("warn")
```

Feature selection wrappers can be found in the `r ref_pkg("mlr3fselect")` packages.
The goal is to find the best subset of features with respect to a `r ref("Measure", text = "performance measure")` in an iterative fashion.

```{r}
#| echo: false
#| column: page

content = as.data.table(mlr_fselectors, objects = TRUE)[, .(key, label, packages, properties, object)]
content[, properties := map(properties, function(x) setdiff(x, "dependencies"))]
content[, object := NULL]

reactable(content, columns = list(
  key = colDef(name = "Key",
    cell = function(value) {
      mlr3book::ref(sprintf("%s_%s", "mlr_fselectors", value), text = value, format = "htmltools")
    }
  ),
  label = colDef(name = "Label"),
  packages = colDef(name = "Packages", cell = function(value) {
    value = setdiff(value, "bbotk")
    if (length(value)) {
      map(value, function(x) tags$li(class = "object-table__list", mlr3book::ref_pkg(x, pkg = x, format = "htmltools"), " "))
    }
  }),
  properties = colDef(name = "Properties", cell = function(value) {
    if (length(value)) {
      tags$ul(map(value, function(x) tags$li(class = "object-table__list", x)))
    }
  })
  ),
  searchable = TRUE,
  pagination = FALSE
)
```

## Example Usage

Run a `r ref("mlr_fselectors_sequential", text = "sequential feature selection")` on the `r ref("mlr_tasks_pima", text = "Pima Indian Diabetes")` data set.

```{r, echo = TRUE}
library(mlr3verse)

# retrieve task
task = tsk("pima")

# load learner
learner = lrn("classif.rpart")

# feature selection on the pima indians diabetes data set
instance = fselect(
  method = fs("sequential"),
  task = task,
  learner = learner,
  resampling = rsmp("holdout"),
  measure = msr("classif.ce")
)

# best performing feature subset
instance$result

# subset the task and fit the final model
task$select(instance$result_feature_set)
learner$train(task)

print(learner)
```
